@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@model List<Expense>
@{
    ViewData["Title"] = "Expenses";
    var totalExpenses = Model.Sum(expense => expense.Value);

}


<div class="text-center mt-5 ">
    <h1 class="display-4"><strong>Expense Tracker</strong></h1></b>

    <div class="bg-white  border-primary p-4 shadow rounded-3">
        <div class="d-flex justify-content-between">
            <a class="btn btn-danger btn px-4" asp-action="Index">
                Back</a>
            <a class="btn btn-success btn" asp-action="CreateEditExpense">Add Item</a>
        </div>
        <br />
        <br />
        <h3>Total Expenses $@(totalExpenses.ToString("F2"))</h3>
        <form asp-action="Search" method="get" class="d-flex">
            <div class="input-group">
                <input type="text" name="queryString" class="form-control" placeholder="Search expenses...">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </form>
        <br />

        <table class="table table-striped">
            <thead class="table-dark">
                <tr>
                    <th>
                        Id
                    </th>
                    <th>
                        Value
                    </th>
                    <th>
                        Description
                    </th>
                    <th>
                        Actions
                    </th>
                </tr>
            </thead>
            <tbody>
                @{
                    foreach (var expense in Model)
                    {
                        <tr class="fs-5 ">
                            <td>
                                <div class="badge bg-danger text-white">
                                    @expense.Id
                                </div>
                            </td>
                            <td>
                                @expense.Value
                            </td>
                            <td>
                                @expense.Description
                            </td>
                            <td>
                                <a class="btn btn-primary" asp-action="CreateEditExpense" asp-route-id="@expense.Id">Edit</a>
                                <a class="btn btn-danger" asp-action="DeleteExpense" asp-route-id="@expense.Id"> Delete</a>
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>
